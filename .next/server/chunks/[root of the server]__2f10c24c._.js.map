{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/mockData.ts"],"sourcesContent":["import type { Patient, Appointment, TreatmentPlan, ProgressNote, StaffMember, Invoice } from './types';\n\nexport const mockPatients: Patient[] = [\n  { id: 'pat1', name: 'Alice Wonderland', email: 'alice@example.com', dateOfBirth: '1990-05-15', phone: '555-0101' },\n  { id: 'pat2', name: 'Bob The Builder', email: 'bob@example.com', dateOfBirth: '1985-11-20', phone: '555-0102' },\n  { id: 'pat3', name: 'Charlie Brown', email: 'charlie@example.com', dateOfBirth: '2000-01-30', phone: '555-0103' },\n];\n\nexport const mockStaff: StaffMember[] = [\n  { id: 'doc1', name: 'Dr. Loji', role: 'Dentist', email: 'drloji@example.com' },\n  { id: 'staff1', name: 'Sarah Miller', role: 'Receptionist', email: 'sarah@example.com' },\n  { id: 'hyg1', name: 'Mike Ross', role: 'Hygienist', email: 'mike@example.com' },\n];\n\nexport const mockAppointments: Appointment[] = [\n  { id: 'apt1', patientId: 'pat1', patientName: 'Alice Wonderland', doctorId: 'doc1', doctorName: 'Dr. Loji', date: new Date().toISOString().split('T')[0], time: '10:00 AM', type: 'Check-up', status: 'Scheduled' },\n  { id: 'apt2', patientId: 'pat2', patientName: 'Bob The Builder', doctorId: 'doc1', doctorName: 'Dr. Loji', date: new Date(Date.now() + 86400000).toISOString().split('T')[0], time: '02:30 PM', type: 'Cleaning', status: 'Confirmed' },\n  { id: 'apt3', patientId: 'pat1', patientName: 'Alice Wonderland', doctorId: 'doc1', doctorName: 'Dr. Loji', date: new Date(Date.now() - 86400000 * 5).toISOString().split('T')[0], time: '09:00 AM', type: 'Filling', status: 'Completed' },\n];\n\nexport const mockTreatmentPlans: TreatmentPlan[] = [\n  {\n    id: 'tp1',\n    patientId: 'pat1',\n    doctorId: 'doc1',\n    title: 'Comprehensive Oral Care Plan',\n    procedures: [\n      { id: 'proc1', name: 'Full Mouth X-Ray', cost: 150 },\n      { id: 'proc2', name: 'Deep Cleaning (Scaling & Root Planing)', cost: 400 },\n      { id: 'proc3', name: 'Fluoride Treatment', cost: 50 },\n    ],\n    startDate: new Date(Date.now() - 86400000 * 10).toISOString().split('T')[0],\n    status: 'Active',\n    totalCost: 600,\n  },\n  {\n    id: 'tp2',\n    patientId: 'pat2',\n    doctorId: 'doc1',\n    title: 'Implant Placement - Phase 1',\n    procedures: [{ id: 'proc4', name: 'Dental Implant Surgery (Single Tooth)', cost: 2000 }],\n    startDate: new Date().toISOString().split('T')[0],\n    status: 'Active',\n    totalCost: 2000,\n  },\n];\n\nexport const mockProgressNotes: ProgressNote[] = [\n  {\n    id: 'pn1',\n    patientId: 'pat1',\n    treatmentPlanId: 'tp1',\n    doctorId: 'doc1',\n    date: new Date(Date.now() - 86400000 * 9).toISOString().split('T')[0],\n    time: '10:30 AM',\n    note: 'Initial consultation. Discussed treatment plan. Patient agreeable. Full mouth X-rays taken.',\n    images: [{ id: 'img1', url: 'https://placehold.co/300x200.png', caption: 'X-Ray Left Side' }],\n    progressStage: 'Initial Assessment',\n  },\n  {\n    id: 'pn2',\n    patientId: 'pat1',\n    treatmentPlanId: 'tp1',\n    doctorId: 'doc1',\n    date: new Date(Date.now() - 86400000 * 2).toISOString().split('T')[0],\n    time: '11:00 AM',\n    note: 'Deep cleaning performed on upper quadrant. Patient tolerated well. Advised on post-op care.',\n    progressStage: 'Procedure Day 1',\n  },\n];\n\nexport const mockInvoices: Invoice[] = [\n    { \n        id: 'inv1', \n        patientId: 'pat1', \n        date: new Date(Date.now() - 86400000 * 10).toISOString().split('T')[0], \n        dueDate: new Date(Date.now() + 86400000 * 20).toISOString().split('T')[0],\n        items: [\n            { description: 'Full Mouth X-Ray', quantity: 1, unitPrice: 150, totalPrice: 150 },\n            { description: 'Deep Cleaning (Scaling & Root Planing)', quantity: 1, unitPrice: 400, totalPrice: 400 },\n        ], \n        totalAmount: 550, \n        amountPaid: 200, \n        status: 'Partial' \n    },\n    { \n        id: 'inv2', \n        patientId: 'pat2', \n        date: new Date().toISOString().split('T')[0], \n        dueDate: new Date(Date.now() + 86400000 * 30).toISOString().split('T')[0],\n        items: [\n            { description: 'Dental Implant Surgery (Single Tooth) - Deposit', quantity: 1, unitPrice: 1000, totalPrice: 1000 },\n        ], \n        totalAmount: 1000, \n        amountPaid: 0, \n        status: 'Pending' \n    },\n];\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 267, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/mockServerDb.ts"],"sourcesContent":["\n// src/lib/mockServerDb.ts\nimport type { Appointment, TreatmentPlan, ProgressNote, Invoice, StaffMember, PaymentTransaction } from './types';\nimport {\n  mockAppointments as initialAppointments,\n  mockTreatmentPlans as initialTreatmentPlans,\n  mockProgressNotes as initialProgressNotes,\n  mockInvoices as initialInvoices,\n  mockStaff as initialStaff,\n  mockPatients as initialPatients // Import initialPatients\n} from './mockData';\nimport type { NextRequest } from 'next/server';\nimport { NextResponse } from 'next/server';\n\nexport interface UserAuth {\n  id: string;\n  name: string;\n  email: string;\n  passwordHash?: string; // For users managed outside Firebase Auth, if any. Optional.\n  role: 'patient' | 'doctor' | 'staff' | 'hygienist' | 'admin' | 'assistant';\n  resetToken?: string;\n  resetTokenExpiry?: Date;\n  dateOfBirth?: string;\n  phone?: string;\n  age?: number;\n  medicalRecords?: string;\n  xrayImageUrls?: string[];\n  hasDiabetes?: boolean;\n  hasHighBloodPressure?: boolean;\n  hasStrokeOrHeartAttackHistory?: boolean;\n  hasBleedingDisorders?: boolean;\n  hasAllergy?: boolean;\n  allergySpecifics?: string;\n  hasAsthma?: boolean;\n  createdAt?: string; // Using string for mock ISO date\n  updatedAt?: string; // Using string for mock ISO date\n}\n\n// Helper to generate unique IDs\nexport function generateId(prefix: string = 'id_') {\n  return prefix + Date.now().toString(36) + Math.random().toString(36).substr(2, 5);\n}\n\n// Initialize users array\nlet users: UserAuth[] = [];\n\n// Populate users from initialStaff\ninitialStaff.forEach(staffMember => {\n  let userAuthRole: UserAuth['role'] = 'staff'; // default\n  if (staffMember.role === 'Dentist') userAuthRole = 'doctor';\n  else if (staffMember.role === 'Hygienist') userAuthRole = 'hygienist';\n  else if (staffMember.role === 'Assistant') userAuthRole = 'assistant';\n  else if (staffMember.role === 'Admin') userAuthRole = 'admin';\n\n  users.push({\n    id: staffMember.id,\n    name: staffMember.name,\n    email: staffMember.email,\n    role: userAuthRole,\n    passwordHash: `$2a$10$mockPasswordFor${staffMember.id}`, // Example mock hash\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  });\n});\n\n// Populate users from initialPatients\ninitialPatients.forEach(patient => {\n  users.push({\n    id: patient.id,\n    name: patient.name,\n    email: patient.email,\n    role: 'patient',\n    phone: patient.phone,\n    dateOfBirth: patient.dateOfBirth,\n    // other patient fields from Patient type can be added here if they exist in UserAuth\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n  });\n});\n\n\nlet appointments: Appointment[] = JSON.parse(JSON.stringify(initialAppointments));\nlet treatmentPlans: TreatmentPlan[] = JSON.parse(JSON.stringify(initialTreatmentPlans));\nlet progressNotes: ProgressNote[] = JSON.parse(JSON.stringify(initialProgressNotes));\nlet invoices: Invoice[] = JSON.parse(JSON.stringify(initialInvoices));\nlet staff: StaffMember[] = JSON.parse(JSON.stringify(initialStaff));\nlet paymentTransactions: PaymentTransaction[] = [];\nlet clinicWaitTime = { text: \"<10 mins\", updatedAt: new Date().toISOString() };\n\n\nexport const db = {\n  users, // Use the populated users array\n  appointments,\n  treatmentPlans,\n  progressNotes,\n  invoices,\n  clinicWaitTime,\n  staff, // Kept for existing logic that might specifically use db.staff\n  paymentTransactions,\n};\n\n\nexport async function authorize(req: NextRequest, requiredRole?: UserAuth['role'] | UserAuth['role'][]) {\n  const mockSessionToken = req.cookies.get('sessionToken')?.value;\n  if (!mockSessionToken) {\n    return { authorized: false, user: null, error: NextResponse.json({ message: 'Unauthorized: No session token' }, { status: 401 }) };\n  }\n  const [userIdFromToken, userRoleFromToken] = mockSessionToken.split(':');\n  const user = db.users.find(u => u.id === userIdFromToken);\n\n  if (!user) {\n    return { authorized: false, user: null, error: NextResponse.json({ message: 'Unauthorized: Invalid session' }, { status: 401 }) };\n  }\n\n  const rolesToCheck = Array.isArray(requiredRole) ? requiredRole : (requiredRole ? [requiredRole] : []);\n\n  if (rolesToCheck.length > 0 && !rolesToCheck.includes(user.role)) {\n    return { authorized: false, user: null, error: NextResponse.json({ message: 'Forbidden: Insufficient permissions' }, { status: 403 }) };\n  }\n  return { authorized: true, user: user, error: null };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 385, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/api/invoices/%5BinvoiceId%5D/record-payment/route.ts"],"sourcesContent":["\n// src/app/api/invoices/[invoiceId]/record-payment/route.ts\nimport { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\nimport { z } from 'zod';\nimport { db, generateId, authorize } from '@/lib/mockServerDb';\nimport type { PaymentTransaction } from '@/lib/types';\n\nconst recordPaymentSchema = z.object({\n  amountPaidNow: z.number().positive(\"Payment amount must be positive\"),\n  paymentMethod: z.string().min(1, \"Payment method is required\").optional().default(\"Card\"),\n  paymentDate: z.string().regex(/^\\d{4}-\\d{2}-\\d{2}$/, \"Payment date must be YYYY-MM-DD\").optional().default(new Date().toISOString().split('T')[0]),\n  notes: z.string().optional().nullable(),\n});\n\ninterface RecordPaymentParams {\n  params: {\n    invoiceId: string;\n  }\n}\n\nexport async function POST(request: NextRequest, { params }: RecordPaymentParams) {\n  // const authResult = await authorize(request, 'staff');\n  // if (!authResult.authorized || !authResult.user) { return authResult.error; }\n  const { invoiceId } = params;\n  const invoice = db.invoices.find(inv => inv.id === invoiceId);\n\n  if (!invoice) {\n    return NextResponse.json({ message: \"Invoice not found\" }, { status: 404 });\n  }\n\n  if (invoice.status === 'Paid') {\n    return NextResponse.json({ message: \"Invoice is already fully paid\" }, { status: 400 });\n  }\n\n  try {\n    const body = await request.json();\n    const validation = recordPaymentSchema.safeParse(body);\n\n    if (!validation.success) {\n      return NextResponse.json({ message: \"Validation failed\", errors: validation.error.flatten().fieldErrors }, { status: 400 });\n    }\n    \n    const { amountPaidNow, paymentMethod, paymentDate, notes } = validation.data;\n\n    // Create new payment transaction record\n    const newPaymentTransaction: PaymentTransaction = {\n      id: generateId('pt_'),\n      invoiceId: invoice.id,\n      amountPaid: amountPaidNow,\n      paymentDate: paymentDate,\n      paymentMethod: paymentMethod,\n      notes: notes ?? undefined,\n      recordedAt: new Date().toISOString(),\n    };\n    db.paymentTransactions.push(newPaymentTransaction);\n\n    // Update invoice details\n    invoice.amountPaid += amountPaidNow;\n\n    if (invoice.amountPaid >= invoice.totalAmount) {\n      invoice.status = 'Paid';\n      invoice.amountPaid = invoice.totalAmount; // Ensure not overpaid in mock\n    } else if (invoice.amountPaid > 0) {\n      invoice.status = 'Partial';\n    }\n    // Overdue logic would require checking dueDate against current date, typically done on GET or a cron job\n\n    console.log(`Payment of ${amountPaidNow} recorded for invoice ${invoiceId}. New amount paid: ${invoice.amountPaid}, Status: ${invoice.status}. Notes: ${notes}`);\n\n    return NextResponse.json(invoice, { status: 200 }); // Return updated invoice\n\n  } catch (error) {\n    console.error(`Error recording payment for invoice ${invoiceId}:`, error);\n    return NextResponse.json({ message: 'Error recording payment' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":"AACA,2DAA2D;;;;AAC3D;AAEA;AACA;;;;AAGA,MAAM,sBAAsB,sIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACnC,eAAe,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IACnC,eAAe,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,8BAA8B,QAAQ,GAAG,OAAO,CAAC;IAClF,aAAa,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,KAAK,CAAC,uBAAuB,mCAAmC,QAAQ,GAAG,OAAO,CAAC,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IACjJ,OAAO,sIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;AACvC;AAQO,eAAe,KAAK,OAAoB,EAAE,EAAE,MAAM,EAAuB;IAC9E,wDAAwD;IACxD,+EAA+E;IAC/E,MAAM,EAAE,SAAS,EAAE,GAAG;IACtB,MAAM,UAAU,4HAAA,CAAA,KAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAA,MAAO,IAAI,EAAE,KAAK;IAEnD,IAAI,CAAC,SAAS;QACZ,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAoB,GAAG;YAAE,QAAQ;QAAI;IAC3E;IAEA,IAAI,QAAQ,MAAM,KAAK,QAAQ;QAC7B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAgC,GAAG;YAAE,QAAQ;QAAI;IACvF;IAEA,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,aAAa,oBAAoB,SAAS,CAAC;QAEjD,IAAI,CAAC,WAAW,OAAO,EAAE;YACvB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAqB,QAAQ,WAAW,KAAK,CAAC,OAAO,GAAG,WAAW;YAAC,GAAG;gBAAE,QAAQ;YAAI;QAC3H;QAEA,MAAM,EAAE,aAAa,EAAE,aAAa,EAAE,WAAW,EAAE,KAAK,EAAE,GAAG,WAAW,IAAI;QAE5E,wCAAwC;QACxC,MAAM,wBAA4C;YAChD,IAAI,CAAA,GAAA,4HAAA,CAAA,aAAU,AAAD,EAAE;YACf,WAAW,QAAQ,EAAE;YACrB,YAAY;YACZ,aAAa;YACb,eAAe;YACf,OAAO,SAAS;YAChB,YAAY,IAAI,OAAO,WAAW;QACpC;QACA,4HAAA,CAAA,KAAE,CAAC,mBAAmB,CAAC,IAAI,CAAC;QAE5B,yBAAyB;QACzB,QAAQ,UAAU,IAAI;QAEtB,IAAI,QAAQ,UAAU,IAAI,QAAQ,WAAW,EAAE;YAC7C,QAAQ,MAAM,GAAG;YACjB,QAAQ,UAAU,GAAG,QAAQ,WAAW,EAAE,8BAA8B;QAC1E,OAAO,IAAI,QAAQ,UAAU,GAAG,GAAG;YACjC,QAAQ,MAAM,GAAG;QACnB;QACA,yGAAyG;QAEzG,QAAQ,GAAG,CAAC,CAAC,WAAW,EAAE,cAAc,sBAAsB,EAAE,UAAU,mBAAmB,EAAE,QAAQ,UAAU,CAAC,UAAU,EAAE,QAAQ,MAAM,CAAC,SAAS,EAAE,OAAO;QAE/J,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC,SAAS;YAAE,QAAQ;QAAI,IAAI,yBAAyB;IAE/E,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,oCAAoC,EAAE,UAAU,CAAC,CAAC,EAAE;QACnE,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA0B,GAAG;YAAE,QAAQ;QAAI;IACjF;AACF","debugId":null}}]
}